#include "Engine/Engine.h"
#include "Engine/Widgets.h"

using namespace Engine;
using namespace Widgets;

Engine::Visual kcgeLogo(
	{
		"  ||  /   ----  ----  ----  ___ ___",
		" ||| /\\   |     |  _  |--    |  |  ",
		"||||/  \\  \\___  \\__/  \\___   |  \\__",
	}, {1, 1}, {20, 180, 50}
);
Engine::Visual mainFrame(
	{

			"                                     /-----------------------------------------------------------------------------------------------------------",
			"                                     |",
			"                                     |",
			" ____________________________________/",
			"/",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
			"|",
	}, {1, 1}
);
Engine::Visual canvasFrame;
Engine::Visual canvas;


void OnTick()
{
	std::cout << "\x1b]2;boing\007";
}

int main()
{
	// No starting menu, because there are no settings that can't be changed while creating the texture.

	/*

	      ||  /   ----  ----  ----  ___ ___  /-----------------------------------------------------------------------------------------------------------
	     ||| /\   |     |  _  |--    |  |    |  #------#  #--------#  #---------------------#  #-----------------------#  #-------/-----#  #------#
	    ||||/  \  \___  \__/  \___   |  \__  |  | Save |  | Export |  | Font: Cascadia Code |  | Font Size: X=08, Y=16 |  | Undo / Redo |  | Exit |
	     ____________________________________/  #------#  #--------#  #---------------------#  #-----------------------#  #-----/-------#  #------#
		/                     __________________________________________________________________________________________________________________________
		|  Foreground Color  /                                                                                                                          \
		|  #-------#------#  |                                                                                                                          |
		|  | R=255 | <C1> |  |                                                                                                                          |
		|  | G=255 | <C2> |  |                                                                                                                          |
		|  | B=255 | <C3> |  |                                                                                                                          |
		|  | A=100 | <C4> |  |                                                                                                                          |
		|  #-------#------#  |                                                                                                                          |
	    |                    |                                                                                                                          |
	    |  Background Color: |                                                                                                                          |
	    |  #-------#------#  |                                                                                                                          |
	    |  | R=255 | [C1] |  |                                                                                                                          |
	    |  | G=255 | [C2] |  |                                                                                                                          |
	    |  | B=255 | [C3] |  |                                                          VIEWPORT                                                        |
	    |  | A=100 | [C4] |  |                                                                                                                          |
	    |  #-------#------#  |                                                                                                                          |
	    |                    |                                                                                                                          |
	    |  { Character: X }  |                                                                                                                          |
	    |                    |                                                                                                                          |
	    |  Tools             |                                                                                                                          |
	    |  #--------------#  |                                                                                                                          |
	    |  | X Foreground |  |                                                                                                                          |
	    |  | - Background |  |                                                                                                                          |
	    |  | X Character  |  |                                                                                                                          |
		|  #--------------#  |                                                                                                                          |
	    |                    \__________________________________________________________________________________________________________________________/
		|  Brush Size
		|  { X=999, Y=999 }
		|
		|  Object Size
		|  #--------------#
		|  | X=999, Y=999 |
		|  #--------------#
	*/

	/*
	missing widgets:
	switch
	no outline and text widgets (just the field), possibly with the option to add another object as a custom outline (auto color)

	Something needed to be adderessed:
	filling the paremeters in widgets and most other things in the engine is miserable

	goodnight too tired to add this to onenotes (26.11.2022)
	*/

	Map map;
	Engine::activeMap = &map;

	Layer layer;
	map.AddLayer(&layer);
	
	Camera camera({ 0, 0 }, { (int)mainFrame.texture[0].size(), (int)mainFrame.texture.size() });
	map.AddCamera(&camera, true);
	
	layer.AddVisual(&mainFrame);
	layer.AddVisual(&kcgeLogo);

	InitializeConsole();
	SetConsoleFontSize(0, 15);
	SetConsoleSizePixels(1000, 1000);

	GlobalOnTick = OnTick;

	GameLoop(60);
}